/*! iFrame Resizer for email blaster.
 *  Based on: Copyright: (c) 2014 David J. Bradshaw - dave@bradshaw.net - v2.5.1 - 2014-06-06
 *  License: MIT
 */
 
!function(){"use strict";function e(e,t,n){"addEventListener"in window?e.addEventListener(t,n,!1):"attachEvent"in window&&e.attachEvent("on"+t,n)}function t(){var e,t=["moz","webkit","o","ms"];for(e=0;e<t.length&&!S;e+=1)S=window[t[e]+"RequestAnimationFrame"];S||n(" RequestAnimationFrame not supported")}function n(e){T.log&&"object"==typeof console&&console.log(y+"[Host page"+w+"]"+e)}function r(e){function t(){function e(){u(S),s(),T.resizedCallback(S)}a(e,S,"resetPage")}function r(e){var t=e.id;n(" Removing iFrame: "+t),e.parentNode.removeChild(e),T.closedCallback(t),n(" --")}function i(){var e=E.substr(b).split(":");return{iframe:document.getElementById(e[0]),id:e[0],height:e[1],width:e[2],type:e[3]}}function f(e){var t=Number(T["max"+e]),r=Number(T["min"+e]),i=e.toLowerCase(),s=Number(S[i]);if(r>t)throw new Error("Value for min"+e+" can not be greater than max"+e);n(" Checking "+i+" is in range "+r+"-"+t),r>s&&(s=r,n(" Set "+i+" to min value")),s>t&&(s=t,n(" Set "+i+" to max value")),S[i]=""+s}function l(){var t=e.origin,r=S.iframe.src.split("/").slice(0,3).join("/");if(T.checkOrigin&&(n(" Checking connection is from: "+r),""+t!="null"&&t!==r))throw new Error("Unexpected message received from: "+t+" for "+S.iframe.id+". Message was: "+e.data+". This error can be disabled by adding the checkOrigin: false option.");return!0}function c(){return y===(""+E).substr(0,b)}function h(){var e=S.type in{"true":1,"false":1};return e&&n(" Ignoring init message from meta parent page"),e}function p(){var e=E.substr(E.indexOf(":")+g+6);n(" MessageCallback passed: {iframe: "+S.iframe.id+", message: "+e+"}"),T.messageCallback({iframe:S.iframe,message:e}),n(" --")}function d(){if(null===S.iframe)throw new Error("iFrame ("+S.id+") does not exist on "+w);return!0}function m(){switch(S.type){case"close":r(S.iframe),T.resizedCallback(S);break;case"message":p();break;case"reset":o(S);break;case"init":t(),T.initCallback(S.iframe);break;default:t()}}var E=e.data,S={};c()&&(n(" Received: "+E),S=i(),f("Height"),f("Width"),!h()&&d()&&l()&&(m(),v=!1))}function i(){null===E&&(E={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},n(" Get position: "+E.x+","+E.y))}function s(){null!==E&&(window.scrollTo(E.x,E.y),n(" Set position: "+E.x+","+E.y),E=null)}function o(e){function t(){u(e),f("reset","reset",e.iframe)}n(" Size reset requested by "+("init"===e.type?"host page":"iFrame")),i(),a(t,e,"init")}function u(e){function t(t){e.iframe.style[t]=e[t]+"px",n(" IFrame ("+e.iframe.id+") "+t+" set to "+e[t]+"px")}T.sizeHeight&&t("height"),T.sizeWidth&&t("width")}function a(e,t,r){r!==t.type&&S?(n(" Requesting animation frame"),S(e)):e()}function f(e,t,r){n("["+e+"] Sending msg to iframe ("+t+")"),r.contentWindow.postMessage(y+t,"*")}function l(){function t(){function e(e){1/0!==T[e]&&0!==T[e]&&(l.style[e]=T[e]+"px",n(" Set "+e+" = "+T[e]+"px"))}e("maxHeight"),e("minHeight"),e("maxWidth"),e("minWidth")}function r(e){return""===e&&(l.id=e="iFrameResizer"+d++,n(" Added missing iframe ID: "+e)),e}function i(){n(" IFrame scrolling "+(T.scrolling?"enabled":"disabled")+" for "+c),l.style.overflow=!1===T.scrolling?"hidden":"auto",l.scrolling=!1===T.scrolling?"no":"yes"}function s(){("number"==typeof T.bodyMargin||"0"===T.bodyMargin)&&(T.bodyMarginV1=T.bodyMargin,T.bodyMargin=""+T.bodyMargin+"px")}function u(){return c+":"+T.bodyMarginV1+":"+T.sizeWidth+":"+T.log+":"+T.interval+":"+T.enablePublicMethods+":"+T.autoResize+":"+T.bodyMargin+":"+T.heightCalculationMethod+":"+T.bodyBackground+":"+T.bodyPadding+":"+T.tolerance}function a(t){e(l,"load",function(){var e=v;f("iFrame.onload",t,l),!e&&T.heightCalculationMethod in x&&o({iframe:l,height:0,width:0,type:"init"})}),f("init",t,l)}var l=this,c=r(l.id);i(),t(),s(),a(u())}function c(e){if("object"!=typeof e)throw new TypeError("Options is not an object.")}function h(){function e(e){if("IFRAME"!==e.tagName)throw new TypeError("Expected <IFRAME> tag, found <"+e.tagName+">.");l.call(e)}function t(e){e=e||{},c(e);for(var t in N)N.hasOwnProperty(t)&&(T[t]=e.hasOwnProperty(t)?e[t]:N[t])}return function(n,r){t(n),Array.prototype.forEach.call(document.querySelectorAll(r||"iframe"),e)}}function p(e){e.fn.iFrameResize=function(t){return c(t),T=e.extend({},N,t),this.filter("iframe").each(l).end()}}var d=0,v=!0,m="message",g=m.length,y="[iFrameSizer]",b=y.length,w="",E=null,S=window.requestAnimationFrame,x={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},T={},N={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,closedCallback:function(){},initCallback:function(){},messageCallback:function(){},resizedCallback:function(){}};t(),e(window,"message",r),"jQuery"in window&&p(jQuery),"function"==typeof define&&define.amd?define(function(){return h()}):window.iFrameResize=h()}();jQuery(function(e){e(".EmailBlasterForm").iFrameResize([{}])})
	


